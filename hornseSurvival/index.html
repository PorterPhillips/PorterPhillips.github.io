<!DOCTYPE html>
<html>
  <head>
    <title>Hornse Survival</title>
    <style>
      body {
        background-color: rgb(50, 200, 30);
        margin: 0px;
      }
      #player {
        position: absolute;
      }
    </style>
  </head>
  <body>
    <h1 id="test">TEST//TEST//TEST</h1>
    <img id="player" src="Hornse_player.png" />
  </body>
</html>

<script>
  const getPlayer = document.getElementById("player");
  const testText = document.getElementById("test");
  let keysDown = {};
  let player = {
    name: "player",
    x: 0,
    y: 0,
    velX: 0,
    velY: 0,
  };
  const velCap = 2;

  //key press checks and logging them to the obj
  document.addEventListener("keydown", (e) => {
    if (!keysDown[e.code]) {
      keysDown[e.code] = true;
    }
    velocityCalc();
    testText.innerText =
      JSON.stringify(keysDown) + " : " + player.dirX + " : " + player.dirY;
  });
  document.addEventListener("keyup", (e) => {
    keysDown[e.code] = false;
    velocityCalc();
    testText.innerText =
      JSON.stringify(keysDown) + " : " + player.dirX + " : " + player.dirY;
  });

  //direction and speed changes/calculations
  function velocityCalc() {
    if (-velCap > player.velY < velCap) {
      if (keysDown["KeyW"]) {
        player.velY += -0.1;
      } else if (keysDown["KeyS"]) {
        player.velY += 0.1;
      }
    } else {
      if (velY > 0) {
        velY += -0.1;
      }
      if (velY < -0) {
        velY += 0.1;
      }
    }
    if (keysDown["KeyW"] && keysDown["KeyS"]) {
      if (velY > 0) {
        velY += -0.1;
      }
      if (velY < -0) {
        velY += 0.1;
      }
    }
    if (-velCap > player.velX < velCap) {
      if (keysDown["KeyA"]) {
        player.velX += -0.1;
      } else if (keysDown["KeyD"]) {
        player.velX += 0.1;
      }
    } else {
      if (velX > 0) {
        velX += -0.1;
      }
      if (velX < -0) {
        velX += 0.1;
      }
    }
    if (keysDown["KeyA"] && keysDown["KeyD"]) {
      if (velX > 0) {
        velX += -0.1;
      }
      if (velX < -0) {
        velX += 0.1;
      }
    }
  }

  function movementCalc() {
    getPlayer.style.top = player.y + "px";
    getPlayer.style.left = player.x + "px";
    player.x += player.velX;
    player.y += player.velY;
  }

  setInterval(() => {
    velocityCalc();
    movementCalc();
  }, 1);
</script>
