<!DOCTYPE html>
<html>
  <head>
    <title>Epilepsy</title>
    <style>
      p {
        font-family: Arial, Helvetica, sans-serif;
      }
      body {
        background-color: black;
        margin: 0px;
      }
      .SliderBox {
        position: absolute;
        border: solid;
        background-color: white;
        width: 160px;
        height: 80px;
        text-align: center;
        left: calc(50vw - 80px);
        top: calc(50vh - 40px);
      }
      #test {
        color: white;
      }
      #test2 {
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="SliderBox">
      <p>Roll for epilepsy</p>
      <button type="button" id="roll">ROLL</button>
      <button type="button" id="stop">STOP</button>
    </div>
    <p id="test">TEST/TEST/TEST</p>
  </body>
</html>
<script>
  const body = document.body;
  const colorList = ["rgb(0,0,255)", "rgb(0,255,0)", "rgb(255,0,0)"];
  let firstColor = "black";
  let secondColor = "black";
  let i = 0;
  toggleBackgroundColor();

  document.getElementById("roll").addEventListener("click", () => {
    let colorOffset = 1;
    if (Math.random() > 0.5) {
      //half of the time the offset will be double, which wraps around to -1. horrible horrible code
      colorOffset = 2;
    }
    firstColorIndex = Math.floor(Math.random() * 3);
    secondColorIndex = (firstColorIndex + colorOffset) % 3;
    firstColor = colorList[firstColorIndex];
    secondColor = colorList[secondColorIndex];

    body.style.backgroundColor = firstColor;
    document.getElementById("test").innerText =
      firstColor +
      " : " +
      secondColor +
      " !" +
      firstColorIndex +
      " " +
      colorOffset;
  });

  document.getElementById("stop").addEventListener("click", () => {
    body.style.backgroundColor = "black";
    firstColor = "black";
    secondColor = "black";
  });

  function toggleBackgroundColor() {
    body.style.backgroundColor = colorList[i++ % 3];
    setTimeout(toggleBackgroundColor, 1);
  }
</script>
