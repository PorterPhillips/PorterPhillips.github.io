<!DOCTYPE html>
<html>
  <head>
    <title>BouncingBox</title>
    <style>
      img {
        position: absolute;
        width: 100px;
        height: 100px;
      }
      body {
        background-color: black;
        margin: 0px;
        overflow: hidden;
      }
      h1 {
        color: white;
      }
    </style>
  </head>

  <body>
    <h1 id="debugStats"></h1>
    <img id="mango" src="mango.jpeg" />
    <img id="mason" src="mason.webp" />
    <img id="sixSeven" src="67.jpeg" />
    <img
      id="mouse"
      src="https://t3.ftcdn.net/jpg/02/56/16/58/360_F_256165891_p7Iba4tBIbXe1dYNRdjodI8sbaENdXGI.jpg"
    />
  </body>
</html>

<script>
  let mason = {
    name: "mason",
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    dirX: Math.random() >= 0.5 ? -1 : 1,
    dirY: Math.random() >= 0.5 ? -1 : 1,
    speed: 1,
  };
  let mango = {
    name: "mango",
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    dirX: Math.random() >= 0.5 ? -1 : 1,
    dirY: Math.random() >= 0.5 ? -1 : 1,
    speed: 1,
  };
  let sixSeven = {
    name: "sixSeven",
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    dirX: Math.random() >= 0.5 ? -1 : 1,
    dirY: Math.random() >= 0.5 ? -1 : 1,
    speed: 1,
  };

  let mouse = {
    name: "mouse",
    x: 0,
    y: 0,
    dirX: Math.random() >= 0.5 ? -1 : 1,
    dirY: Math.random() >= 0.5 ? -1 : 1,
    speed: 1,
    width: 5,
  };

  function changePosition(obj) {
    document.getElementById(obj.name).style.left = obj.x + "px";
    document.getElementById(obj.name).style.top = obj.y + "px";
  }

  changePosition(mason);
  changePosition(mango);
  changePosition(sixSeven);

  document.addEventListener("mousemove", mousePos);

  function mousePos(e) {
    mouse.x = e.x - 50;
    mouse.y = e.y - 50;
  }

  function mouseBox() {
    document.getElementById("mouse").style.left = mouse.x + "px";
    document.getElementById("mouse").style.top = mouse.y + "px";
  }

  function movementCalc(obj) {
    obj.x += obj.dirX * obj.speed;
    obj.y += obj.dirY * obj.speed;
    changePosition(obj);
    if (obj.y <= 0) {
      obj.dirY = 1;
    }
    if (obj.y >= window.innerHeight - 100) {
      obj.dirY = -1;
    }
    if (obj.x >= window.innerWidth - 100) {
      obj.dirX = -1;
    }
    if (obj.x <= 0) {
      obj.dirX = 1;
    }
  }

  function checkCollision(obj1, obj2) {
    if (
      obj1.x + 100 > obj2.x &&
      obj1.x < obj2.x + 100 &&
      obj1.y + 100 > obj2.y &&
      obj1.y < obj2.y + 100
    ) {
      if (true) {
        var distX = Math.abs(obj1.x - obj2.x);
        var distY = Math.abs(obj1.y - obj2.y);

        if (distX > distY) {
          obj1.dirX *= -1;
          obj2.dirX *= -1;
        } else {
          obj1.dirY *= -1;
          obj2.dirY *= -1;
        }
      } else {
        var temp = obj1.dirX;
        obj1.dirX = obj2.dirX;
        obj2.dirX = temp;
        temp = obj1.dirY;
        obj1.dirY = obj2.dirY;
        obj2.dirY = temp;
      }
    }
  }

  function debugStats() {
    document.getElementById("debugStats").innerHTML = JSON.stringify(mango);
  }

  setInterval(function () {
    movementCalc(mason);
    movementCalc(mango);
    movementCalc(sixSeven);
    mouseBox();
    checkCollision(mason, mango);
    checkCollision(mango, sixSeven);
    checkCollision(sixSeven, mason);
    checkCollision(mouse, mango);
    checkCollision(mouse, mason);
    checkCollision(mouse, sixSeven);
    debugStats();
  }, 1);
</script>
